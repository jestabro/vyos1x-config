(include_subdirs unqualified)

(ocamllex vyos1x_lexer)
(menhir
 (flags --table)
 (modules vyos1x_parser))

(library
 (name vyos1x)
 (public_name vyos1x-config)
 (modules config_tree config_diff vylist vytree vyos1x_parser vyos1x_lexer parser util reference_tree generate)
 (libraries yojson menhirLib fileutils pcre xml-light)
 (preprocess (pps ppx_deriving_yojson))
 (foreign_stubs
  (language c)
  (names lexical_numeric_compare)))

(executables
 (names cli_set cli_delete)
 (modules cli cli_set cli_delete)
 (flags (:standard -cclib -lstdc++ -cclib -lvyatta-cfg))
 (link_flags (:standard -cclib -lstdc++ -cclib -lvyatta-cfg))
 (foreign_stubs
  (language c)
  (names adapter)))
